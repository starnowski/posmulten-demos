# Demo project for integration with Spring Boot, Thymeleaf and Posmulten-hibernate

* [Introduction](#introduction)
* [How to prepare database](#how-to-prepare-database)
* [How to build project](#how-to-build-project)

## Introduction
Project is simple application with users that posts text content. 
The idea behind demo is that application use Multi-tenancy architecture with shared schema strategy.
Which means that all tenants shares not only the same database but also schemas.
In our example tenant is customer that has domain where his user posts text content.
[Posmulten-hibernate](https://github.com/starnowski/posmulten-hibernate) library required of using Postgres as database engine.

## How to prepare database
Project user Postgres database version. Minimum version is 9.6.
To create database users and schema execute below script from project in correct order:

- scripts/create-database-owner.sql
- scripts/create-database-user.sql
- scripts/create-database.sql

## How to build project
```bash
mvn clean install
```
**Important** it is worth to executed maven with test (without passing **-DskipTests=true** parameter) because the project does not use tools that apply changes to the database, like [Liquibase](https://www.liquibase.org/) or [Flyway](https://flywaydb.org/).
For this purpose, the project uses a test hibernates configuration that creates the schema we will describe later.
To be clear, in a regular project, we would consider using tools that apply database change so that generated SQL instructions could use in a production environment.
Hibernate tests configuration is good solution for running tests but it can be used also to generate schema on our local environment.
We can used SQL statements generated by configuration in tools that applies changes in our higher environments.
 

